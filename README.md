# Инструкция по настройке и работе

## Настройка оповещений из Zendesk

В случае отсутствия возможности авторизация в API Zendesk по средствам Логин/Пароля или Zendesk token возможно использовать  \_zendesk_shared_session, для  его получения, необходимо в полезной нагрузке найти получить запрос execute, из которого в куки запроса вытащить \_zendesk_shared_session и указать в .env файле - в параметре ZENDESK_SHARED_SESSION

Управление частотой запросов задаётся параметром FETCH_TIME

```
значение в < 15 (15*1000) секунд вызывает 429 ошибку (rate-limiter)

комфортным значением для работы будет не менее 1 минуты
```

## Настройка оповещений из Slack:

Открыть Slack в веб версии, далее зайти в консоль разработчика (F12 > console), вставить необходимый скрипт

## Основные настройки

Выполнить настройку файла .env (инструкция в файле envExample)
Запустить сервер с ботом командой `npm run serve` (Если необходимо установить или обновить зависимости - `npm i`)

Команды для бота:

```
/start - Настраивает сотрудника в ВАТС, включает сервис получения обращений, включает оповещения о событиях и последующие звонки
/stop - Удаляет настройку сотрудника в ВАТС, отключает получение обращений и оповещения о событиях
/ack 000000 - Подтверждает обращение номер 000000 и отменяет последующий звонок по нему
/slack - Подтверждает ВСЕ полученные сообщения от SLACK и отключает оповещения по ним
/ack 123456 - "Подтверждает" тикет и отменяет звонки по нему
/getUnackedTickets - возвращает список тикетов, находящихся без подтверждения
```